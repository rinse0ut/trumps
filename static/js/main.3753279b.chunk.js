(this.webpackJsonptrumps=this.webpackJsonptrumps||[]).push([[0],{172:function(e,t,n){e.exports=n.p+"static/media/ant.2fe8faf8.jpeg"},173:function(e,t,n){e.exports=n.p+"static/media/ben.6cba428d.jpeg"},174:function(e,t,n){e.exports=n.p+"static/media/dan.abf052b9.jpeg"},175:function(e,t){e.exports="data:image/jpeg;base64,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"},176:function(e,t,n){e.exports=n.p+"static/media/didun.2cfccad8.jpeg"},177:function(e,t,n){e.exports=n.p+"static/media/grant.39b9be86.jpeg"},178:function(e,t,n){e.exports=n.p+"static/media/mike.006e457e.jpeg"},179:function(e,t,n){e.exports=n.p+"static/media/morgan.9c9ff2b1.jpeg"},180:function(e,t,n){e.exports=n.p+"static/media/nick.c153051e.jpeg"},181:function(e,t,n){e.exports=n.p+"static/media/pearce.2064c0f2.jpeg"},182:function(e,t,n){e.exports=n.p+"static/media/rob.5110024b.jpeg"},183:function(e,t,n){e.exports=n.p+"static/media/scouse.d02204f4.jpeg"},184:function(e,t,n){e.exports=n.p+"static/media/stevooo.965acec9.jpeg"},185:function(e,t,n){e.exports=n.p+"static/media/sunny.c00e8603.jpeg"},186:function(e,t,n){e.exports=n.p+"static/media/will.32aef3bd.jpeg"},187:function(e,t,n){e.exports=n.p+"static/media/vinnie.bb7ff1a7.jpeg"},202:function(e,t,n){e.exports=n(235)},208:function(e,t,n){},223:function(e,t){},225:function(e,t){},235:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(48),c=n.n(l),o=(n(207),n(208),n(23)),u=n(16),i=n(18),s=n(189),m=n(6),d=n.n(m),p=n(11),E=n(8),v=n(74);n(210),n(213),n(236);v.initializeApp({apiKey:"AIzaSyDPk2j-y4TB9ex6MWD0jZmHXsN2aw6VZv4",authDomain:"trumps-53976.firebaseapp.com",databaseURL:"https://trumps-53976.firebaseio.com",projectId:"trumps-53976",storageBucket:"trumps-53976.appspot.com",messagingSenderId:"822188667084",appId:"1:822188667084:web:56d4680cf508a02ea55269",measurementId:"G-FNX5HRRFLY"});var f=v.auth(),g=v.firestore(),A=v.storage(),b=function(){var e=new v.auth.FacebookAuthProvider;return console.log("FB LOGIN"),v.auth().signInWithPopup(e)};function h(){return f.signOut()}function y(e){return g.collection(e)}var j={authenticated:!1,user:{uid:null,username:"Visitor",role:"visitor"}},O=Object(a.createContext)(void 0);function C(){var e=Object(a.useContext)(O);if(console.log("USE AUTH CONTEXT VALUE",e),void 0===e)throw new Error("Expected context value to be set");return e}console.log("AUTH CONTEXT VALUE",O);var w=function(e){var t=e.children,n=Object(a.useState)(j),l=Object(E.a)(n,2),c=l[0],o=l[1];function u(){return(u=Object(p.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("users").doc(t).get();case 2:n=e.sent,a=n.data(),console.log("FETCH USER",a),o({authenticated:!0,user:a});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){var e=function(e){return f.onAuthStateChanged(e)}((function(e){var t={authenticated:!0,user:{uid:null===e||void 0===e?void 0:e.uid,username:null===e||void 0===e?void 0:e.displayName,role:"user"}};console.log("AUTH",t),console.log("USER",e),e?(!function(e){u.apply(this,arguments)}(e.uid),o(t)):o(j)}));return function(){o(j),e()}}),[]),r.a.createElement(O.Provider,{value:c},t)};var k=function(e){var t=e.component,n=Object(s.a)(e,["component"]),a=C().authenticated;return console.log("AUTH_ROUTE AUTHENTICATED",a),r.a.createElement(i.b,Object.assign({},n,{render:function(e){return a?r.a.createElement(t,e):r.a.createElement(i.a,{to:"/signin"})}}))},x=n(13),S=n(12),I=n(249),N=n(252),T=n(237),D=n(147),F=n(17),U=n(49);function M(){var e=Object(u.a)(["\n  position: fixed;\n  height: 50;\n  bottom: 0;\n  right: 0;\n  left: 0;\n  padding: 10px;\n"]);return M=function(){return e},e}function B(){var e=Object(u.a)(["\n  padding-top: 60px;\n"]);return B=function(){return e},e}function P(){var e=Object(u.a)(["\n  background: WhiteSmoke;\n  min-height: 100vh;\n  max-height: 100%;\n"]);return P=function(){return e},e}function R(){var e=Object(u.a)(["\n  color: white;\n  &:hover {color: white;}\n"]);return R=function(){return e},e}function K(){var e=Object(u.a)(["\n  position: fixed;\n  right: 0;\n  margin-right: 10px;\n"]);return K=function(){return e},e}function G(){var e=Object(u.a)(["\n  position: fixed;\n  left: 0;\n  margin-left: 5px;\n"]);return G=function(){return e},e}function H(){var e=Object(u.a)(["\n  color: white;\n  margin: 0;\n"]);return H=function(){return e},e}function L(){var e=Object(u.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: fixed;\n  height: 50px;\n  background: #1b9a59;\n  top: 0;\n  left: 0;\n  right: 0;\n  z-index: 1;\n"]);return L=function(){return e},e}var Q=F.a.header(L()),Y=F.a.h1(H()),W=F.a.div(G()),V=F.a.div(K()),X=Object(F.a)(o.b)(R()),z=F.a.div(P()),J=F.a.div(B()),Z=F.a.div(M()),q=Object(D.a)(),_=Object(D.a)();function $(){var e=Object(i.g)(),t=Object(i.h)();console.log("LOCATION",t);var n=!["/home","/signin","/singout"].includes(t.pathname);return r.a.createElement(Q,null,n&&r.a.createElement(W,{onClick:function(){return e.goBack()}},r.a.createElement(U.a,{name:"angle left",size:"large",inverted:!0})),r.a.createElement(Y,null,r.a.createElement(q.Target,null)),r.a.createElement(V,null,r.a.createElement(_.Target,null)))}function ee(e){var t=e.to,n=e.children;return r.a.createElement(_.Source,null,r.a.createElement(X,{to:t},n))}var te=function(e){var t=e.children;return r.a.createElement(z,null,r.a.createElement($,null),r.a.createElement(J,null,t))},ne=function(){var e=Object(a.useState)({firstname:"",lastname:"",username:"",email:"",password:"",error:""}),t=Object(E.a)(e,2),n=t[0],l=t[1];console.log("SIGN UP");var c=function(e){var t;l(Object(S.a)(Object(S.a)({},n),{},(t={},Object(x.a)(t,e.target.name,e.target.value),Object(x.a)(t,"error",""),t)))},o=function(){var e=Object(p.a)(d.a.mark((function e(t){var a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,c=n.email,o=n.password,f.createUserWithEmailAndPassword(c,o);case 4:if(!(null===(a=e.sent)||void 0===a?void 0:a.user)){e.next=16;break}return console.log("USER",n),e.next=9,a.user.updateProfile({displayName:n.username});case 9:return e.next=11,g.collection("users").doc(a.user.uid).set({uid:a.user.uid,firstname:n.firstname,lastname:n.lastname,username:n.username,email:n.email,role:"user"});case 11:return r={url:"https://rinse0ut.github.io/trumps/"},e.next=14,a.user.sendEmailVerification(r);case 14:l(Object(S.a)(Object(S.a)({},n),{},{error:"Welcome ".concat(n.username,". To continue please verify your email.")})),h();case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(1),l(Object(S.a)(Object(S.a)({},n),{},{error:e.t0.message}));case 21:case"end":return e.stop()}var c,o}),e,null,[[1,18]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(I.a,null,r.a.createElement(q.Source,null,"Sign Up"),r.a.createElement("br",null),r.a.createElement(N.a,{onSubmit:o},r.a.createElement(N.a.Field,null,r.a.createElement("label",{htmlFor:"firstname"},"First Name"),r.a.createElement("input",{type:"text",placeholder:"First Name",name:"firstname",onChange:c,required:!0}),r.a.createElement("br",null)),r.a.createElement(N.a.Field,null,r.a.createElement("label",{htmlFor:"username"},"Last Name"),r.a.createElement("input",{type:"text",placeholder:"Last Name",name:"lastname",onChange:c,required:!0}),r.a.createElement("br",null)),r.a.createElement(N.a.Field,null,r.a.createElement("label",{htmlFor:"username"},"Username"),r.a.createElement("input",{type:"text",placeholder:"Username",name:"username",onChange:c,required:!0}),r.a.createElement("br",null)),r.a.createElement(N.a.Field,null,r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"text",placeholder:"Email",name:"email",onChange:c,required:!0}),r.a.createElement("br",null)),r.a.createElement(N.a.Field,null,r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",placeholder:"Password",name:"password",onChange:c,required:!0}),r.a.createElement("br",null)),r.a.createElement(T.a,{primary:!0,type:"submit"},"Sign Up")),n.error&&r.a.createElement("h4",null,n.error))},ae=n(149);function re(){var e=Object(u.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100vh;  \n  width: 100vw;  \n  margin-top: -60px;\n"]);return re=function(){return e},e}F.a.div(re());var le=function(){var e=C().authenticated,t=Object(i.g)();e&&t.push("/home");var n=Object(a.useState)({email:"",password:"",error:""}),l=Object(E.a)(n,2),c=l[0],o=l[1],u=function(e){var t;o(Object(S.a)(Object(S.a)({},c),{},(t={},Object(x.a)(t,e.target.name,e.target.value),Object(x.a)(t,"error",""),t)))},s=function(){var e=Object(p.a)(d.a.mark((function e(n){var a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,l=c.email,u=c.password,f.signInWithEmailAndPassword(l,u);case 4:if(null===(r=e.sent)||void 0===r||null===(a=r.user)||void 0===a?void 0:a.emailVerified){e.next=9;break}return o(Object(S.a)(Object(S.a)({},c),{},{error:"Please verify your email before to continue"})),e.next=9,h();case 9:t.push("/home"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),o(Object(S.a)(Object(S.a)({},c),{},{error:e.t0.message}));case 15:case"end":return e.stop()}var l,u}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(p.a)(d.a.mark((function e(n){var a,r,l,u,i,s,m,p;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b();case 3:if(a=e.sent){e.next=7;break}return o(Object(S.a)(Object(S.a)({},c),{},{error:"Facebook user not found"})),e.abrupt("return");case 7:if(a&&console.log("FB",a),!a||!(null===a||void 0===a?void 0:a.additionalUserInfo)){e.next=17;break}return e.next=11,y("users").doc(null===a||void 0===a||null===(r=a.user)||void 0===r?void 0:r.uid).get();case 11:if(p=e.sent,console.log("HAS USER",p.exists),e.t0=!p.exists,!e.t0){e.next=17;break}return e.next=17,g.collection("users").doc(null===a||void 0===a||null===(l=a.user)||void 0===l?void 0:l.uid).set({uid:null===a||void 0===a||null===(u=a.user)||void 0===u?void 0:u.uid,username:null===a||void 0===a||null===(i=a.user)||void 0===i?void 0:i.displayName,email:null===a||void 0===a||null===(s=a.user)||void 0===s?void 0:s.email,photoURL:null===a||void 0===a||null===(m=a.user)||void 0===m?void 0:m.photoURL,role:"user"});case 17:t.push("/home"),e.next=23;break;case 20:e.prev=20,e.t1=e.catch(0),o(Object(S.a)(Object(S.a)({},c),{},{error:e.t1.message}));case 23:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(I.a,null,r.a.createElement(q.Source,null,"Top Trumps"),r.a.createElement(ee,{to:"/signup"},"SIGN UP"),r.a.createElement("br",null),r.a.createElement(N.a,{onSubmit:s},r.a.createElement(N.a.Field,null,r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"text",placeholder:"Email",name:"email",onChange:u,required:!0}),r.a.createElement("br",null)),r.a.createElement(N.a.Field,null,r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",placeholder:"Password",name:"password",onChange:u,required:!0}),r.a.createElement("br",null)),r.a.createElement(T.a,{primary:!0,type:"submit"},"Sign in")),r.a.createElement("br",null),r.a.createElement("hr",null),r.a.createElement("br",null),r.a.createElement(T.a,{color:"facebook",onClick:m},r.a.createElement(U.a,{name:"facebook"}),"Sign in with Facebook"),c.error&&r.a.createElement(ae.a,{color:"red"},c.error))},ce=function(){var e=function(){var e=Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(T.a,{type:"button",onClick:e},"Log Out")},oe=n(188),ue=n(37);var ie=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Object(a.useState)(),r=Object(E.a)(n,2),l=r[0],c=r[1];return Object(a.useEffect)((function(){if(e){if(t)return g.collection(e).onSnapshot((function(e){var t,n=[],a=e.docs,r=Object(ue.a)(a);try{for(r.s();!(t=r.n()).done;){var l=t.value;console.log("Document found at path: ".concat(l.ref.path));var o=l.id,u=l.data();n.push(Object(S.a)({id:o},u))}}catch(i){r.e(i)}finally{r.f()}c(n)}));!function(){n.apply(this,arguments)}()}function n(){return(n=Object(p.a)(d.a.mark((function t(){var n,a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y(e).get();case 2:n=t.sent,a=n.docs.map((function(e){console.log("DOC",e.id,e.data());var t=e.id,n=e.data();return Object(S.a)({id:t},n)})),console.log("DATA",a),c(a);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}}),[]),l},se=n(254);function me(){var e=Object(u.a)(["\n  height: 100vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-top: -70px;\n"]);return me=function(){return e},e}var de=F.a.div(me());var pe=function(){return r.a.createElement(de,null,r.a.createElement(U.a,{loading:!0,name:"spinner",size:"big"}))},Ee={visitor:{static:["about:visit","membership:visit","home-page:login"]},user:{static:["about:visit","membership:visit","games:visit","friends:visit"],dynamic:{"game:play":function(e){var t=e.packGroupId,n=e.userGroupIds;return console.log("GAME:PLAY",{userGroupIds:n,packGroupId:t}),"public"===t||!!n&&(console.log("GAME:PLAY INCLUDES",n.includes(t)),n.includes(t))}}},moderator:{static:["about:visit","membership:visit","games:visit","friends:visit","fiends:visit","packs:visit","packs:edit"]},creator:{static:["about:visit","membership:visit","games:visit","fiends:visit","packs:visit","packs:edit","packs:delete","packs:create"],dynamic:{"pack:edit":function(e){var t=e.userId,n=e.packOwnerId;return!(!t||!n)&&t===n}}},admin:{static:["about:visit","membership:visit","games:visit","friends:visit","packs:visit","packs:edit","packs:delete","packs:create"]}};function ve(e){return function(e,t,n,a){var r=e[t];if(!r)return!1;var l=r.static;if(l&&l.includes(n))return!0;var c=r.dynamic;if(c){var o=c[n];return!!o&&o(a)}return!1}(Ee,e.role,e.perform,e.data)?e.yes():e.no()}ve.defaultProps={yes:function(){return null},no:function(){return null}};var fe=ve;function ge(e){var t=e.title,n=e.description,a=e.url;return r.a.createElement(se.a.Item,null,r.a.createElement(se.a.Content,null,r.a.createElement(se.a.Header,null,a?r.a.createElement(o.b,{to:a},t):t),n))}function Ae(e){var t=e.children;return r.a.createElement(se.a.Item,null,r.a.createElement(se.a.Content,null,t))}function be(e){var t=e.children;return r.a.createElement(se.a.Header,null,t)}var he=function(e){var t=e.user,n=e.title,a=e.items,l=e.renderItem;return a?r.a.createElement(r.a.Fragment,null,r.a.createElement(q.Source,null,n),r.a.createElement(ae.a,null,r.a.createElement(se.a,{divided:!0,relaxed:"very",size:"large"},a.length>0?a.map((function(e){return t&&e.action?r.a.createElement(fe,{role:null===t||void 0===t?void 0:t.role,perform:e.action,yes:function(){return l?l(e):r.a.createElement(ge,e)}}):l?l(e):r.a.createElement(ge,e)})):r.a.createElement(Ae,null,"No items")))):r.a.createElement(pe,null)};var ye=function(){var e=ie("users");return r.a.createElement(he,{title:"Friends \ud83c\udf0e",items:e,renderItem:function(e){return r.a.createElement(se.a.Item,null,r.a.createElement(oe.a,{avatar:!0,src:e.photoURL}),r.a.createElement(se.a.Content,null,r.a.createElement(se.a.Header,null,e.username)))}})};function je(){var e=Object(a.useState)(""),t=Object(E.a)(e,2),n=t[0],l=t[1],c=C().user;return r.a.createElement(N.a,null,r.a.createElement(N.a.Input,null,r.a.createElement("input",{placeholder:"New Pack Title eg 'Classic Pioneers'",value:n,onChange:function(e){l(e.target.value)},required:!0})),r.a.createElement(T.a,{color:"blue",onClick:function(){""!==n&&g.collection("categories").add({title:n,stats:{},cards:{},group:"public",author:null===c||void 0===c?void 0:c.username})}},"Create"))}var Oe=function(){var e=ie("categories",!0);return console.log("CATS",e),r.a.createElement(I.a,null,r.a.createElement(he,{title:"Packs \ud83d\udc3a",items:e,renderItem:function(e){return r.a.createElement(Ae,null,r.a.createElement(be,null,e.title),r.a.createElement(o.b,{to:"/category/".concat(null===e||void 0===e?void 0:e.id,"/stats")}," Stats"),console.log("DUMP",Object.keys(e.stats)),!e.stats||Object.keys(e.stats).length>0?r.a.createElement(r.a.Fragment,null," | ",r.a.createElement(o.b,{to:"/category/".concat(null===e||void 0===e?void 0:e.id,"/cards")}," Cards")):null,r.a.createElement("br",null),"Author: ",e.author)}}),r.a.createElement(je,null))};var Ce=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Object(a.useState)(),l=Object(E.a)(r,2),c=l[0],o=l[1];return console.log("USE DOC",c),Object(a.useEffect)((function(){if(e){if(n)return g.collection(e).doc(t).onSnapshot((function(e){var t=e.data();console.log("SNAP SHOT",t),o(t)}));!function(){a.apply(this,arguments)}()}function a(){return(a=Object(p.a)(d.a.mark((function n(){var a,r;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,y(e).doc(t).get();case 2:a=n.sent,r=a.data(),console.log("FETCH DATA",r),o(r);case 6:case"end":return n.stop()}}),n)})))).apply(this,arguments)}}),[]),c};function we(e){var t=e.categoryId,n=e.category,l=e.statKey,c=e.stat,o=Object(a.useState)(c.title),u=Object(E.a)(o,2),i=u[0],s=u[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(N.a.Field,null,r.a.createElement("input",{value:i,onChange:function(e){s(e.target.value)}})),r.a.createElement(T.a,{color:"blue",onClick:function(){var e={};e["stats.".concat(l)]={title:i},g.collection("categories").doc(t).update(e)}},"Update"),r.a.createElement(T.a,{color:"red",onClick:function(){for(var e in delete n.stats[l],n.cards)delete n.cards[e][l];g.collection("categories").doc(t).set(n)}},"Delete"),r.a.createElement("br",null),r.a.createElement("br",null))}function ke(e){var t=e.categoryId,n=e.category,l=Object(a.useState)(""),c=Object(E.a)(l,2),o=c[0],u=c[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(N.a.Field,null,r.a.createElement("input",{value:o,placeholder:"New Stat",onChange:function(e){u(e.target.value)}})),r.a.createElement(T.a,{color:"blue",onClick:function(){n.stats[o]={title:o},g.collection("categories").doc(t).set(n),u("")}},"Create"),r.a.createElement("br",null),r.a.createElement("br",null))}var xe=function(){var e=Object(i.i)().categoryId,t=Ce("categories",e,!0);return console.log("USE DOC RESULT",t),t?r.a.createElement(I.a,null,r.a.createElement(q.Source,null,"Stats"),r.a.createElement("p",null,"Create the list of stats that will appear on each card.  Eg Strength or Skill"),r.a.createElement(N.a,null,r.a.createElement(ke,{categoryId:e,category:t}),r.a.createElement("hr",null),r.a.createElement("br",null),t.stats&&Object.entries(t.stats).map((function(n){var a=Object(E.a)(n,2),l=a[0],c=a[1];return r.a.createElement(we,{categoryId:e,category:t,statKey:l,stat:c})})))):r.a.createElement(pe,null)},Se=n(73),Ie=n(253),Ne=(n(251),n(169));function Te(){var e=Object(u.a)(["\n  color: red;\n"]);return Te=function(){return e},e}var De=F.a.div(Te());var Fe=function(e){var t=e.categoryId,n=e.category,l=e.card,c=Object(Ne.a)({defaultValues:l}),o=c.register,u=c.errors,i=c.reset,s=c.handleSubmit,m=Object(a.useState)((null===l||void 0===l?void 0:l.imgUrl)||""),v=Object(E.a)(m,2),f=v[0],A=v[1];function b(){return(b=Object(p.a)(d.a.mark((function e(a){var r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.imgUrl=f,r=l?l.id:"card".concat(Object.keys(n.cards).length+1),a.id=r,n.cards[r]=a,e.next=6,g.collection("categories").doc(t).set(n);case 6:c=e.sent,console.log("RESULT",c),l||i();case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(){return(h=Object(p.a)(d.a.mark((function e(){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=7;break}return console.log("DELETE CARD?",l.id,l),a=JSON.parse(JSON.stringify(n)),delete a.cards[l.id],console.log("CAT POST DELETE",a),e.next=7,g.collection("categories").doc(t).set(a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return console.log("!CARD2",l,!l),r.a.createElement(N.a,null,r.a.createElement(N.a.Field,null,r.a.createElement("label",null,"Title"),r.a.createElement("input",{name:"title",ref:o({required:!0})}),u.title&&r.a.createElement(De,null,"Title is required")),r.a.createElement("br",null),r.a.createElement(N.a.Field,null,r.a.createElement("label",{htmlFor:"countryCode"},"Country Code"),r.a.createElement("select",{name:"countryCode",ref:o},r.a.createElement("option",{value:""},"Select..."),r.a.createElement("option",{value:"bb"},"Barbados"),r.a.createElement("option",{value:"fr"},"France"),r.a.createElement("option",{value:"ru"},"Russia"),r.a.createElement("option",{value:"gb sct"},"Scotland"),r.a.createElement("option",{value:"uk"},"UK"),r.a.createElement("option",{value:"us"},"USA"),r.a.createElement("option",{value:"gb wls"},"Wales"))),r.a.createElement("br",null),r.a.createElement(N.a.Field,null,r.a.createElement(Ue,{imgUrl:f,setImgUrl:A})),r.a.createElement("br",null),Object.entries(n.stats).map((function(e){var t=Object(E.a)(e,2),n=t[0],a=t[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(N.a.Field,null,r.a.createElement("label",{htmlFor:n},a.title),r.a.createElement("input",{placeholder:a.title,name:n,type:"number",ref:o({required:!0})}),u[n]&&r.a.createElement(De,null,a.title," is required")),r.a.createElement("br",null))})),r.a.createElement(T.a,{color:"blue",onClick:s((function(e){return b.apply(this,arguments)}))},l?"Update":"Create"),l&&r.a.createElement(T.a,{color:"red",onClick:function(){return h.apply(this,arguments)}},"Delete"))};function Ue(e){var t=e.imgUrl,n=e.setImgUrl,l=Object(a.useState)(null),c=Object(E.a)(l,2),o=c[0],u=c[1];return r.a.createElement("div",null,r.a.createElement(oe.a,{src:t}),r.a.createElement("input",{type:"file",onChange:function(e){u(e.target.files[0])}}),r.a.createElement(T.a,{primary:!0,disabled:!o,onClick:function(e){e.preventDefault(),console.log("FILE",typeof o,o),Date.now(),A.ref("/images/".concat(o.name)).put(o).on("state_changed",console.log,console.error,(function(){A.ref("images").child(o.name).getDownloadURL().then((function(e){u(null),n(e)}))}))}},"Upload Image"))}var Me=n(170),Be=r.a.createRef();function Pe(e){var t=e.handleOnFileLoad,n=function(e){Be.current&&Be.current.open(e)};return r.a.createElement(Me.a,{ref:Be,onFileLoad:t,onError:function(e){console.log(e)},noClick:!0,noDrag:!0,onRemoveFile:function(e){console.log("---------------------------"),console.log(e),console.log("---------------------------")}},(function(e){var t=e.file;return r.a.createElement("aside",{style:{display:"flex",flexDirection:"row",marginBottom:10}},r.a.createElement("div",{style:{borderWidth:1,borderStyle:"solid",borderColor:"#ccc",lineHeight:2.5,marginTop:5,marginBottom:5,marginRight:5}},t&&t.name),r.a.createElement(T.a,{primary:!0,onClick:n},"Upload CSV File"))}))}var Re=function(){var e=Object(i.i)().categoryId,t=Ce("categories",e),n=Object(a.useState)(null),l=Object(E.a)(n,2),c=l[0],o=l[1];if(!t)return r.a.createElement(pe,null);function u(e){return s.apply(this,arguments)}function s(){return(s=Object(p.a)(d.a.mark((function n(a){var r,l,c,u,i,s,m;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,o(null),r=Object(Se.a)(a),l=r[0],c=r.slice(1),u=Object(Se.a)(l.data),u[0],i=u.slice(1),s=Object.fromEntries(i.map((function(e){return[e,{title:e}]}))),m=c.reduce((function(e,t,n){var a=Object(Se.a)(t.data),r=a[0],l=a.slice(1);console.log(r,l);var c="card".concat(n+1);return e[c]={id:c,title:r},i.forEach((function(t,n){e[c][t]=l[n]})),e}),{}),n.next=8,g.collection("categories").doc(e).set({title:null===t||void 0===t?void 0:t.title,stats:s,cards:m});case 8:n.sent,n.next=15;break;case 11:n.prev=11,n.t0=n.catch(0),console.error("Error uploading CSV",n.t0),o("Error uploading CSV File.  Check the format.");case 15:case"end":return n.stop()}}),n,null,[[0,11]])})))).apply(this,arguments)}var m=[{menuItem:"Create",render:function(){return r.a.createElement(I.a,null,r.a.createElement(Fe,{categoryId:e,category:t}))}},{menuItem:"Edit (".concat(Object.keys(t.cards).length,")"),render:function(){return r.a.createElement(I.a,null,r.a.createElement(N.a,null,Object.entries(t.cards).sort((function(e,t){return t[0].localeCompare(e[0])})).reverse().map((function(n){var a=Object(E.a)(n,2),l=(a[0],a[1]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Fe,{categoryId:e,category:t,card:l}),r.a.createElement("hr",null))}))))}},{menuItem:"CSV Upload",render:function(){return r.a.createElement(I.a,null,r.a.createElement("br",null),r.a.createElement("h2",null,"Example CSV Format"),r.a.createElement(ae.a,null,"Title,Height,Strength,Skill,Weight",r.a.createElement("br",null),"Adam,170,8,5,79",r.a.createElement("br",null),"Ben,175,10,5,85",r.a.createElement("br",null)),r.a.createElement(Pe,{handleOnFileLoad:u}))}}];return r.a.createElement(r.a.Fragment,null,c&&r.a.createElement(ae.a,{inverted:!0,color:"red"},c),r.a.createElement(q.Source,null,t.title),r.a.createElement(Ie.a,{panes:m}))};var Ke=function(){var e=C().user,t=Object(i.g)(),n=ie("categories"),l=ie("users"),c=Object(a.useState)({categoryId:"",player2Id:""}),o=Object(E.a)(c,2),u=o[0],s=o[1],m=function(e){s(Object(S.a)(Object(S.a)({},u),{},Object(x.a)({},e.target.name,e.target.value)))};function v(){return(v=Object(p.a)(d.a.mark((function a(){var r,c,o;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!(r=n&&Object.values(n).find((function(e){return e.id===u.categoryId})))||!e){a.next=7;break}return c=null===l||void 0===l?void 0:l.find((function(e){return e.id===u.player2Id})),a.next=5,g.collection("games").add({pack:r,p1Id:e.uid,p1Username:e.username,p2Id:u.player2Id,p2Username:c.username,p1TurnNumber:0,p2TurnNumber:0,turnNumber:0,created:Date.now()});case 5:o=a.sent,t.push("/game/".concat(o.id));case 7:case"end":return a.stop()}}),a)})))).apply(this,arguments)}return console.log("CHALLENGE FORM",u),console.log("CHALLENGE DATA",n,l),n&&l?r.a.createElement(I.a,null,r.a.createElement(q.Source,null,"Challenge"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(N.a,null,r.a.createElement(N.a.Field,null,r.a.createElement("label",{htmlFor:"player2Id"},"Friend"),r.a.createElement("select",{name:"player2Id",value:u.player2Id,onChange:m},r.a.createElement("option",{value:""},"Select..."),Object.values(l).map((function(e){return r.a.createElement("option",{value:e.id},e.username)})))),r.a.createElement(N.a.Field,null,r.a.createElement("label",{htmlFor:"categoryId"},"Pack"),r.a.createElement("select",{name:"categoryId",value:u.categoryId,onChange:m},r.a.createElement("option",{value:""},"Select..."),Object.values(n).map((function(t){return r.a.createElement(fe,{role:null===e||void 0===e?void 0:e.role,perform:"game:play",data:{packGroupId:null===t||void 0===t?void 0:t.group,userGroupIds:null===e||void 0===e?void 0:e.groups},yes:function(){return r.a.createElement("option",{value:t.id},t.title)}})}))))),r.a.createElement("br",null),r.a.createElement(T.a,{color:"red",circular:!0,onClick:function(){return v.apply(this,arguments)}},"Create New Game")):r.a.createElement(pe,null)};var Ge=function(){return r.a.createElement(I.a,null,r.a.createElement(q.Source,null,"Membership"),r.a.createElement("br",null),r.a.createElement("h3",null,"\ud83c\udf56 \ud83c\udf73  Ham & Egger"),r.a.createElement("ul",null,r.a.createElement("li",null,"Play top trumps with your friends")),r.a.createElement("h3",null,"\u2b50  Gold"),r.a.createElement("ul",null,r.a.createElement("li",null,"Play top trumps with your friends"),r.a.createElement("li",null,"Invite your friends to play custom packs")),r.a.createElement("h3",null,"\ud83d\udc51  Platinium"),r.a.createElement("ul",null,r.a.createElement("li",null,"Play top trumps with your friends"),r.a.createElement("li",null,"Invite your friends to play custom packs"),r.a.createElement("li",null,"Edit custom packs")),r.a.createElement("h3",null,"\ud83d\udc8e  Diamond"),r.a.createElement("ul",null,r.a.createElement("li",null,"Play top trumps with your friends"),r.a.createElement("li",null,"Invite your friends to play custom packs"),r.a.createElement("li",null,"Edit custom packs"),r.a.createElement("li",null,"Create new custom packs")))};function He(){var e=Object(u.a)(["\n  width: 100%;\n"]);return He=function(){return e},e}var Le=Object(F.a)(T.a)(He());var Qe=function(){var e=Object(i.g)(),t=C().user,n=ie("games",!0),a=null===n||void 0===n?void 0:n.filter((function(e){return(null===t||void 0===t?void 0:t.uid)===e.p1Id||(null===t||void 0===t?void 0:t.uid)===e.p2Id})).sort((function(e,t){return t.created-e.created})).map((function(e){var t,n,a,r,l,c=null===(t=e.turns["turn".concat(e.turnNumber)])||void 0===t||null===(n=t.p1Cards)||void 0===n?void 0:n.length,o=null===(a=e.turns["turn".concat(e.turnNumber)])||void 0===a||null===(r=a.p2Cards)||void 0===r?void 0:r.length;return{title:"".concat(null===e||void 0===e?void 0:e.p1Username," (").concat(c,") vs ").concat(null===e||void 0===e?void 0:e.p2Username," (").concat(o,")"),description:"".concat(null===e||void 0===e||null===(l=e.pack)||void 0===l?void 0:l.title,": Round ").concat(null===e||void 0===e?void 0:e.turnNumber),url:"/game/".concat(null===e||void 0===e?void 0:e.id)}}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(he,{title:"Games \ud83d\ude80",items:a,user:t}),r.a.createElement(Z,null,r.a.createElement(Le,{color:"red",icon:"add",size:"huge",circular:!0,onClick:function(){return e.push("/challenge")}},"New Game")))},Ye=n(14),We=n(255),Ve=n(250),Xe=n(172),ze=n.n(Xe),Je=n(173),Ze=n.n(Je),qe=n(174),_e=n.n(qe),$e=n(175),et=n.n($e),tt=n(176),nt=n.n(tt),at=n(177),rt=n.n(at),lt=n(178),ct=n.n(lt),ot=n(179),ut=n.n(ot),it=n(180),st=n.n(it),mt=n(181),dt=n.n(mt),pt=n(182),Et=n.n(pt),vt=n(183),ft=n.n(vt),gt=n(184),At=n.n(gt),bt=n(185),ht=n.n(bt),yt=n(186),jt=n.n(yt),Ot=n(187),Ct=n.n(Ot),wt={ant:ze.a,ben:Ze.a,dan:_e.a,didun:nt.a,dt:et.a,grant:rt.a,mike:ct.a,morgan:ut.a,nick:st.a,pearce:dt.a,rob:Et.a,scouse:ft.a,stevooo:At.a,sunny:ht.a,will:jt.a,vinnie:Ct.a};function kt(e){var t,n=e.title,a=e.value,l=e.statKey,c=e.selectedKey,o=e.onSelectStat,u=e.result,i=e.player,s=!1;return l===c&&null==u?s=!0:t=l===c&&0===u?"warning":l===c&&u===i?"positive":l===c&&u!==i?"negative":void 0,console.log("ACTIVE",c===l,c,l),r.a.createElement(We.a.Row,{key:l,onClick:o,active:s},r.a.createElement(xt,{status:t},n),r.a.createElement(xt,{status:t},a))}function xt(e){var t=e.status,n=e.children;return r.a.createElement(We.a.Cell,{positive:"positive"===t,negative:"negative"===t,warning:"warning"===t},n)}var St=function(e){var t=e.card,n=e.stats,a=e.selectedStatKey,l=e.player,c=e.result,o=e.disabled;return r.a.createElement(We.a,{celled:!0,unstackable:!0,size:"small",selectable:!o,style:{width:"80%",marginLeft:5}},r.a.createElement(We.a.Header,null,r.a.createElement(We.a.Row,null,r.a.createElement(We.a.HeaderCell,null,t.title.toUpperCase()),r.a.createElement(We.a.HeaderCell,{textAlign:"center"},t.countryCode&&r.a.createElement(Ve.a,{name:t.countryCode})))),r.a.createElement(We.a.Body,null,r.a.createElement(We.a.Row,null,r.a.createElement(We.a.Cell,{colSpan:"2"},r.a.createElement(oe.a,{src:wt[t.img]||t.imgUrl,fluid:!0}))),Object.entries(n).sort((function(e,t){return t[0].localeCompare(e[0])})).reverse().map((function(n){var o=Object(E.a)(n,2),u=o[0],i=o[1].title,s=t[u];return r.a.createElement(kt,{key:u,statKey:u,selectedKey:a,title:i,value:s,result:c,player:l,onSelectStat:function(){return e.onSelectStat(u)}})}))))};function It(){var e=Object(u.a)(["\n  float: ",";\n  width: 90%;\n  margin: 5px;\n  padding: 5px;\n  border-radius: ",";\n  background: ",";\n  border: 1px solid grey;\n  color: ",";\n"]);return It=function(){return e},e}function Nt(){var e=Object(u.a)(["\n  width: 100%;\n"]);return Nt=function(){return e},e}var Tt=Object(F.a)(T.a)(Nt());function Dt(e){var t,n,r=Ce("games",e,!0),l=(null===r||void 0===r||r.pack.stats,Object(a.useState)()),c=Object(E.a)(l,2),o=c[0],u=(c[1],C().user),i=null===u||void 0===u?void 0:u.uid,s=null;(null===r||void 0===r?void 0:r.p1Id)===i?(s=1,t=null===r||void 0===r?void 0:r.p1Username,n=null===r||void 0===r?void 0:r.p2Username):(null===r||void 0===r?void 0:r.p2Id)===i&&(s=2,t=null===r||void 0===r?void 0:r.p2Username,n=null===r||void 0===r?void 0:r.p1Username);Math.floor(2*Math.random());Object(a.useEffect)((function(){var t,n=null===r||void 0===r||null===(t=r.pack)||void 0===t?void 0:t.cards,a=null===r||void 0===r?void 0:r.turns;if(n&&!a){var l=function(e){for(var t=[],n=Object.keys(e),a=n.length/2,r=0;r<a;r++){var l=Math.floor(Math.random()*a),c=n.splice(l,1),o=Object(E.a)(c,1)[0];t.push(o)}return[t,n]}(n),c=Object(E.a)(l,2),o=c[0],u=c[1];!function(){i.apply(this,arguments)}()}function i(){return(i=Object(p.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.collection("games").doc(e).update({turnNumber:1,p1TurnNumber:1,p2TurnNumber:1,"turns.turn1":{id:1,player:1,p1Cards:o,p2Cards:u,drawCards:[],statKey:null,result:null}});case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}}),[e,r]);var m=null===r||void 0===r?void 0:r.turnNumber,v=r?r["p".concat(s,"TurnNumber")]:1,f=Object(a.useState)(v),A=Object(E.a)(f,2),b=A[0],h=A[1];b!==v&&h(v);var y=Object(a.useCallback)((function(){var t=b+1;function n(){return(n=Object(p.a)(d.a.mark((function n(){return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,g.collection("games").doc(e).update(Object(x.a)({},"p".concat(s,"TurnNumber"),t));case 2:case"end":return n.stop()}}),n)})))).apply(this,arguments)}t>m&&console.log("HANDLE NEXT TURN STOP?",t,m),function(){n.apply(this,arguments)}(),h(t)}),[b,s]);s||console.error("PLAYER NOT FOUND");var j=r&&function(e,t){if(!e.turns||0===t)return null;var n="turn".concat(t);return n in e.turns?e.turns[n]:null}(r,b),O=null===j||void 0===j?void 0:j.player,w=r&&Ft(r,b,1),k=r&&Ft(r,b,2),S=r&&Ft(r,b,0);console.log("DRAW CARDS",S);var I=Object(a.useState)(null),N=Object(E.a)(I,2),T=N[0],D=N[1],F=Object(a.useCallback)((function(e){O===s&&D(e)}),[O,s]),U=Object(a.useCallback)((function(){if(!T||0===w.length||0===k.length)return null;var t,n,a,l=[],c=T,o=Object(Se.a)(w),u=o[0],i=o.slice(1),m=Object(Se.a)(k),E=m[0],v=m.slice(1),f=Number(null===r||void 0===r?void 0:r.pack.cards[u][c]),A=Number(null===r||void 0===r?void 0:r.pack.cards[E][c]);if(!f||!A)return null;function h(){return(h=Object(p.a)(d.a.mark((function r(){var o,u,i;return d.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!=b){r.next=3;break}return console.log("TURN COUNT UNDEFINED"),r.abrupt("return",null);case 3:return u=b+1,i=0===t?s:t,r.next=7,g.collection("games").doc(e).update((o={},Object(x.a)(o,"turns.turn".concat(b,".statKey"),c),Object(x.a)(o,"turns.turn".concat(b,".result"),t),Object(x.a)(o,"turns.turn".concat(u),{id:u,player:i,p1Cards:n,p2Cards:a,drawCards:l,statKey:null,result:null}),Object(x.a)(o,"turnNumber",u),o));case 7:case"end":return r.stop()}}),r)})))).apply(this,arguments)}f>A?(t=1,n=[].concat(Object(Ye.a)(i),[E],Object(Ye.a)(S),[u]),a=Object(Ye.a)(v)):f<A?(t=2,n=Object(Ye.a)(i),a=[].concat(Object(Ye.a)(v),[u],Object(Ye.a)(S),[E])):(t=0,n=Object(Ye.a)(i),a=Object(Ye.a)(v),l=S.length>0?[].concat(Object(Ye.a)(S),[u,E]):[u,E]),function(){h.apply(this,arguments)}(),D(null)}),[T,r,w,k,S,b]);if(!r||!w||!k)return{game:r,turn:j,currentTurn:b,currentPlayer:s,topCards:[],handleSelectStat:F};var M=Object(E.a)(w,1)[0],B=null===r||void 0===r?void 0:r.pack.cards[M],P=Object(E.a)(k,1)[0],R=[B,null===r||void 0===r?void 0:r.pack.cards[P]],K={turnId:null===j||void 0===j?void 0:j.id,turnNo:r.turnNumber,p1TurnNo:r.p1TurnNumber,p2TurnNo:r.p2TurnNumber,currentPlayer:s,turnPlayer:O,turn:j};return console.table({turnId:null===j||void 0===j?void 0:j.id,turnNo:r.turnNumber,p1TurnNo:r.p1TurnNumber,p2TurnNo:r.p2TurnNumber,currentPlayer:s,turnPlayer:O}),console.table(null===r||void 0===r?void 0:r.turns),console.log(K),console.log(T&&!(null===j||void 0===j?void 0:j.result),T,!(null===j||void 0===j?void 0:j.result)),{game:r,error:o,turn:j,currentTurn:b,turnPlayer:O,currentPlayer:s,currentUsername:t,opponentUsername:n,topCards:R,selectedStat:T,handleSelectStat:F,handleTurn:U,handleNextTurn:y,debug:K}}function Ft(e,t,n){return e.turns&&0!==t?0===n?e.turns["turn".concat(t)].drawCards:(console.log("TURN DUMP",t),e.turns["turn".concat(t)]["p".concat(n,"Cards")]):[]}var Ut=F.a.div(It(),(function(e){return"right"===e.align?"right":"left"}),(function(e){return"right"===e.align?"10px 0px 10px 10px":"0px 10px 10px 10px"}),(function(e){return"right"===e.align?"#dcf8c6":"white"}),(function(e){return e.color}));function Mt(e){var t=e.username,n=e.children,a=e.align,l=void 0===a?"left":a,c=e.color;return r.a.createElement(Ut,{align:l,color:c},r.a.createElement("b",null,t,":"),r.a.createElement("br",null),r.a.createElement("span",{style:{color:"black"}},n))}var Bt=function(){var e,t,n,a=Dt(Object(i.i)().gameId),l=a.game,c=(a.error,a.turn),o=a.currentTurn,u=a.turnPlayer,s=a.currentPlayer,m=a.currentUsername,d=a.opponentUsername,p=a.topCards,v=a.selectedStat,f=a.handleSelectStat,g=a.handleTurn,A=a.handleNextTurn,b=(a.debug,Object(E.a)(p,2)),h=b[0],y=b[1],j=1===s?h:y,O=1===s?y:h,C=null===c||void 0===c?void 0:c.statKey;(null===c||void 0===c?void 0:c.result)===s?(e="You won the round! \u2705",t="\ud83d\ude03",n="\ud83d\ude22"):0===(null===c||void 0===c?void 0:c.result)?(e="You drew the round! \u2194\ufe0f",t="\ud83d\ude2e",n="\ud83d\ude2e"):(null===c||void 0===c?void 0:c.result)&&(e="You lost the round! \u274c",t="\ud83d\ude22",n="\ud83d\ude03");var w=1===s?"red":"blue",k=1===s?"blue":"red";return l?j||O?O?j?r.a.createElement(I.a,null,r.a.createElement(q.Source,null,"Game On!"),s===u?r.a.createElement(Mt,{username:"Games Master",color:"green"},"Round ",o,". Your turn ",m,". Tap that stat!"):r.a.createElement(Mt,{username:"Games Master",color:"green"},"Round ",o,". ",d,"'s turn."),C&&r.a.createElement(r.a.Fragment,null,s===u?r.a.createElement(r.a.Fragment,null,r.a.createElement(Mt,{username:m,align:"right",color:"CornflowerBlue"},l.pack.stats[C].title,": ",j[C]),r.a.createElement(Mt,{username:d,color:"orange"},l.pack.stats[C].title,": ",O[C]," ",n)):r.a.createElement(r.a.Fragment,null,r.a.createElement(Mt,{username:d,color:"orange"},l.pack.stats[C].title,": ",O[C]),r.a.createElement(Mt,{username:m,align:"right",color:"CornflowerBlue"},l.pack.stats[C].title,": ",j[C]," ",t))),e&&r.a.createElement(Mt,{username:"Games Master",color:"green"},e),j&&r.a.createElement(St,{card:j,stats:l.pack.stats,selectedStatKey:(null===c||void 0===c?void 0:c.statKey)||v,player:s,result:(null===c||void 0===c?void 0:c.result)&&c.result,onSelectStat:f,disabled:null!=(null===c||void 0===c?void 0:c.result)||u!==s}),r.a.createElement(Z,null,null==v&&null==(null===c||void 0===c?void 0:c.statKey)&&null==(null===c||void 0===c?void 0:c.result)&&r.a.createElement(r.a.Fragment,null,r.a.createElement(T.a,{color:w,content:m,icon:"user",label:{basic:!0,color:w,pointing:"left",content:null===c||void 0===c?void 0:c.p1Cards.length}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(T.a,{color:k,content:d,icon:"user",label:{basic:!0,color:k,pointing:"left",content:null===c||void 0===c?void 0:c.p2Cards.length}})),v&&o===l.turnNumber&&s===u&&r.a.createElement(Tt,{circular:!0,color:"red",icon:"play",size:"huge",onClick:g},"Play Card"),o<l.turnNumber&&null!=(null===c||void 0===c?void 0:c.result)&&r.a.createElement(Tt,{circular:!0,color:"red",icon:"fast forward",size:"huge",onClick:A},"Next Round"))):r.a.createElement(r.a.Fragment,null,r.a.createElement(q.Source,null,"Game Over!"),r.a.createElement(Mt,{username:"Games Master",color:"green"},"Good game! ",d," wins! \u2620\ufe0f")):r.a.createElement(r.a.Fragment,null,r.a.createElement(q.Source,null,"Game Over!"),r.a.createElement(Mt,{username:"Games Master",color:"green"},"Good game! ",m," wins! \ud83c\udf89")):r.a.createElement(r.a.Fragment,null,r.a.createElement(q.Source,null,"Game Over!"),r.a.createElement(Mt,{username:"Games Master",color:"green"},"Good game! It's a draw! \ud83e\udd37\u200d\u2642\ufe0f")):r.a.createElement(pe,null)};var Pt=function(){return r.a.createElement(I.a,null,r.a.createElement(q.Source,null,"About \ud83d\udc7e"),r.a.createElement("h2",null,"Custom Top Trumps"),r.a.createElement("p",null,"\xa9 Digital Crusade 2020"),r.a.createElement("p",null,"If you have any suggestion for improvments or bug reports please WhatsApp or email ",r.a.createElement("a",{href:"mailto:djthomson@gmail.com"},"DT")),r.a.createElement("h3",null,"Alpha Release v0.1.0 - 22/11/2020"),r.a.createElement("h4",null,"What's new"),r.a.createElement("ul",null,r.a.createElement("li",null,"User Authentication"),r.a.createElement("li",null,"Enable 2 player mode with realtime updates"),r.a.createElement("li",null,"Create and manage card packs"),r.a.createElement("li",null,"WhatsApp mobile theme")),r.a.createElement("h3",null,"Alpha Release v0.2.0 - 23/11/2020"),r.a.createElement("h4",null,"What's new"),r.a.createElement("ul",null,r.a.createElement("li",null,"Facebook login"),r.a.createElement("li",null,"Show profile picture on friends list")),r.a.createElement("h4",null,"Improvements"),r.a.createElement("ul",null,r.a.createElement("li",null,"Made it easier to create pioneer packs.  Just add the stats and fill them out!"),r.a.createElement("li",null,"Login screen UX")),r.a.createElement("h4",null,"Fixes"),r.a.createElement("ul",null,r.a.createElement("li",null,"Confirmation email redirect")))};function Rt(){var e=Object(u.a)([" // @TODO DRY UP\n  width: 100%;\n"]);return Rt=function(){return e},e}var Kt=Object(F.a)(T.a)(Rt());function Gt(){var e=Object(i.g)(),t=C().user;return console.log("DISPLAY NAME",t),r.a.createElement(I.a,null,r.a.createElement("p",null,"Welcome ",t.username),r.a.createElement(fe,{role:null===t||void 0===t?void 0:t.role,perform:"home-page:login",yes:function(){return r.a.createElement(ee,{to:"/signin"},"LOG IN")}}),r.a.createElement(he,{title:"Top Trumps",items:[{title:"Games",url:"/games",action:"games:visit"},{title:"Packs",url:"/categories",action:"packs:visit"},{title:"Friends",url:"/friends",action:"friends:visit"},{title:"About",url:"/about",action:"about:visit"},{title:"Membership",url:"/membership",action:"membership:visit"}],user:t}),"visitor"!==t.role&&r.a.createElement(ce,null),r.a.createElement(fe,{role:null===t||void 0===t?void 0:t.role,perform:"games:visit",yes:function(){return r.a.createElement(Z,null,r.a.createElement(Kt,{color:"red",icon:"add",size:"huge",circular:!0,onClick:function(){return e.push("/challenge")}},"New Game"))}}))}var Ht=function(){return r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"/signup",component:ne}),r.a.createElement(i.b,{path:"/signin",component:le}),r.a.createElement(i.b,{path:"/home",component:Gt}),r.a.createElement(i.b,{path:"/about",component:Pt}),r.a.createElement(i.b,{path:"/membership",component:Ge}),r.a.createElement(k,{path:"/friends",component:ye}),r.a.createElement(k,{path:"/categories",component:Oe}),r.a.createElement(k,{path:"/challenge",component:Ke}),r.a.createElement(k,{path:"/games",component:Qe}),r.a.createElement(k,{path:"/game/:gameId",component:Bt}),r.a.createElement(k,{path:"/category/:categoryId/stats",component:xe}),r.a.createElement(k,{path:"/category/:categoryId/cards",component:Re}),r.a.createElement(k,{path:"/signout",component:ce}),r.a.createElement(i.a,{from:"/",to:"/home"}))};var Lt=function(){return r.a.createElement(o.a,null,r.a.createElement(w,null,r.a.createElement(te,null,r.a.createElement(Ht,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Lt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[202,1,2]]]);
//# sourceMappingURL=main.3753279b.chunk.js.map