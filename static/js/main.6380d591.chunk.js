(this.webpackJsonptrumps=this.webpackJsonptrumps||[]).push([[0],{114:function(e,t,n){e.exports=n.p+"static/media/will.32aef3bd.jpeg"},125:function(e,t,n){e.exports=n(144)},131:function(e,t,n){},144:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(30),c=n.n(l),o=(n(130),n(131),n(18)),u=n(12),i=n(116),s=n(6),m=n(88);n(132),n(135);m.initializeApp({apiKey:"AIzaSyDPk2j-y4TB9ex6MWD0jZmHXsN2aw6VZv4",authDomain:"trumps-53976.firebaseapp.com",databaseURL:"https://trumps-53976.firebaseio.com",projectId:"trumps-53976",storageBucket:"trumps-53976.appspot.com",messagingSenderId:"822188667084",appId:"1:822188667084:web:56d4680cf508a02ea55269",measurementId:"G-FNX5HRRFLY"});var d=m.auth(),p=m.firestore();function v(){return d.signOut()}function E(e){return p.collection(e)}var g=Object(a.createContext)(void 0);function b(){var e=Object(a.useContext)(g);if(void 0===e)throw new Error("Expected context value to be set");return e}var f=function(e){var t=e.children,n=Object(a.useState)(null),l=Object(s.a)(n,2),c=l[0],o=l[1];return Object(a.useEffect)((function(){var e=function(e){return d.onAuthStateChanged(e)}((function(e){o(e)}));return function(){e()}}),[]),r.a.createElement(g.Provider,{value:{currentUser:c}},t)};var h=function(e){var t=e.component,n=Object(i.a)(e,["component"]),a=b().currentUser;return console.log("AUTH_ROUTE USER",a),r.a.createElement(u.b,Object.assign({},n,{render:function(e){return a?r.a.createElement(t,e):r.a.createElement(u.a,{to:"/signin"})}}))},O=n(11),j=n.n(O),y=n(17),C=n(15),S=n(8),k=function(){var e=Object(a.useState)({username:"",email:"",password:"",error:""}),t=Object(s.a)(e,2),n=t[0],l=t[1];console.log("SIGN UP");var c=function(e){var t;l(Object(S.a)(Object(S.a)({},n),{},(t={},Object(C.a)(t,e.target.name,e.target.value),Object(C.a)(t,"error",""),t)))},o=function(){var e=Object(y.a)(j.a.mark((function e(t){var a,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,c=n.email,o=n.password,d.createUserWithEmailAndPassword(c,o);case 4:if(!(null===(a=e.sent)||void 0===a?void 0:a.user)){e.next=16;break}return console.log("USER",n),e.next=9,a.user.updateProfile({displayName:n.username});case 9:return e.next=11,p.collection("users").doc(a.user.uid).set({username:n.username,email:n.email});case 11:return r={url:"http://localhost:3000/"},e.next=14,a.user.sendEmailVerification(r);case 14:l(Object(S.a)(Object(S.a)({},n),{},{error:"Welcome ".concat(n.username,". To continue please verify your email.")})),v();case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(1),l(Object(S.a)(Object(S.a)({},n),{},{error:e.t0.message}));case 21:case"end":return e.stop()}var c,o}),e,null,[[1,18]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Sign up"),r.a.createElement("form",{onSubmit:o},r.a.createElement("input",{type:"text",placeholder:"Username",name:"username",onChange:c}),r.a.createElement("br",null),r.a.createElement("input",{type:"text",placeholder:"Email",name:"email",onChange:c}),r.a.createElement("br",null),r.a.createElement("input",{type:"password",placeholder:"Password",name:"password",onChange:c}),r.a.createElement("br",null),r.a.createElement("button",{type:"submit"},"Sign Up")),n.error&&r.a.createElement("h4",null,n.error))};var w=function(){var e=b().currentUser,t=Object(u.g)();e&&t.push("/home");var n=Object(a.useState)({email:"",password:"",error:""}),l=Object(s.a)(n,2),c=l[0],o=l[1],i=function(e){var t;o(Object(S.a)(Object(S.a)({},c),{},(t={},Object(C.a)(t,e.target.name,e.target.value),Object(C.a)(t,"error",""),t)))},m=function(){var e=Object(y.a)(j.a.mark((function e(n){var a,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,l=c.email,u=c.password,d.signInWithEmailAndPassword(l,u);case 4:if(null===(r=e.sent)||void 0===r||null===(a=r.user)||void 0===a?void 0:a.emailVerified){e.next=9;break}return o(Object(S.a)(Object(S.a)({},c),{},{error:"Please verify your email before to continue"})),e.next=9,v();case 9:t.push("/home"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),o(Object(S.a)(Object(S.a)({},c),{},{error:e.t0.message}));case 15:case"end":return e.stop()}var l,u}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Log In"),r.a.createElement("form",{onSubmit:m},r.a.createElement("input",{type:"text",placeholder:"Email",name:"email",onChange:i}),r.a.createElement("br",null),r.a.createElement("input",{type:"password",placeholder:"Password",name:"password",onChange:i}),r.a.createElement("br",null),r.a.createElement("button",{type:"submit"},"Log in")),c.error&&r.a.createElement("h4",null,c.error))},T=function(){var e=function(){var e=Object(y.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{type:"button",onClick:e},"Log Out"))};var x=function(e){var t=Object(a.useState)(),n=Object(s.a)(t,2),r=n[0],l=n[1];return Object(a.useEffect)((function(){function t(){return(t=Object(y.a)(j.a.mark((function t(){var n,a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E(e).get();case 2:n=t.sent,a=n.docs.map((function(e){return Object(S.a)(Object(S.a)({},e.data()),{},{id:e.id})})),l(a);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}e&&function(){t.apply(this,arguments)}()}),[]),r},U=n(160),I=n(164);function N(e){var t=e.title,n=e.description,a=e.url;return r.a.createElement(U.a.Item,null,r.a.createElement(U.a.Content,null,r.a.createElement(U.a.Header,null,a?r.a.createElement(o.b,{to:a},t):t),n))}var F=function(e){var t=e.items;return r.a.createElement(I.a,null,r.a.createElement(U.a,{divided:!0,relaxed:!0},t.map(N)))},P=n(41),A=n(39),R=n(42);function D(){var e=Object(P.a)(["\n  height: 100vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-top: -70px;\n"]);return D=function(){return e},e}var L=R.a.div(D());var G=function(){return r.a.createElement(L,null,r.a.createElement(A.a,{loading:!0,name:"spinner",size:"big"}))},K=n(113),M=n(158);function H(){var e=Object(P.a)(["\n  position: fixed;\n  height: 50;\n  background: #1b9a59;\n  bottom: 0;\n  left: 0;\n  right: 0;\n"]);return H=function(){return e},e}function W(){var e=Object(P.a)(["\n  padding-top: 70px;\n"]);return W=function(){return e},e}function Y(){var e=Object(P.a)(["\n  position: fixed;\n  left: 0;\n  margin-left: 5px;\n"]);return Y=function(){return e},e}function z(){var e=Object(P.a)(["\n  color: white;\n  margin: 0;\n"]);return z=function(){return e},e}function B(){var e=Object(P.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: fixed;\n  height: 50px;\n  background: #1b9a59;\n  top: 0;\n  left: 0;\n  right: 0;\n  z-index: 1;\n"]);return B=function(){return e},e}var J=R.a.header(B()),V=R.a.h1(z()),X=R.a.div(Y()),Z=R.a.div(W()),$=R.a.div(H()),_=Object(K.a)();function q(){var e=Object(u.g)(),t=Object(u.h)();console.log("LOCATION",t);var n=!["/home","/signin","/singout"].includes(t.pathname);return r.a.createElement(J,null,n&&r.a.createElement(X,{onClick:function(){return e.goBack()}},r.a.createElement(A.a,{name:"angle left",size:"large",inverted:!0})),r.a.createElement(V,null,r.a.createElement(_.Target,null)))}var Q=function(e){var t=e.children;return b().currentUser,r.a.createElement("div",{style:{height:"100vh",backgroundColor:"WhiteSmoke"}},r.a.createElement(M.a,null,r.a.createElement(q,null),r.a.createElement(Z,null,t)))};var ee=function(){var e=x("users"),t=null===e||void 0===e?void 0:e.map((function(e){return{title:"".concat(e.username),description:"".concat(e.email)}}));return e?t?r.a.createElement(r.a.Fragment,null,r.a.createElement(_.Source,null,"Friends"),r.a.createElement(F,{items:t})):r.a.createElement("div",null,"No users."):r.a.createElement(G,null)};function te(){var e=Object(a.useState)(""),t=Object(s.a)(e,2),n=t[0],l=t[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{value:n,onChange:function(e){l(e.target.value)}}),r.a.createElement("button",{onClick:function(){p.collection("categories").add({title:n,stats:{},cards:{}})}},"Add"))}var ne=function(){var e=x("categories");return console.log("CATS",e),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,"CATEGORY LIST"),r.a.createElement("ul",null,null===e||void 0===e?void 0:e.map((function(e){return r.a.createElement("li",null,e.title," |",r.a.createElement(o.b,{to:"/category/".concat(null===e||void 0===e?void 0:e.id,"/stats")}," Stats")," |",r.a.createElement(o.b,{to:"/category/".concat(null===e||void 0===e?void 0:e.id,"/cards")}," Cards"))})),r.a.createElement(te,null)))};var ae=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Object(a.useState)(),l=Object(s.a)(r,2),c=l[0],o=l[1];return console.log("USE DOC",c),Object(a.useEffect)((function(){if(e){if(n)return p.collection(e).doc(t).onSnapshot((function(e){var t=e.data();console.log("SNAP SHOT",t),o(t)}));!function(){a.apply(this,arguments)}()}function a(){return(a=Object(y.a)(j.a.mark((function n(){var a,r;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,E(e).doc(t).get();case 2:a=n.sent,r=a.data(),console.log("FETCH DATA",r),o(r);case 6:case"end":return n.stop()}}),n)})))).apply(this,arguments)}}),[]),c};function re(e){var t=e.categoryId,n=e.category,l=e.statKey,c=e.stat,o=Object(a.useState)(c.title),u=Object(s.a)(o,2),i=u[0],m=u[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{value:i,onChange:function(e){m(e.target.value)}}),r.a.createElement("button",{onClick:function(){var e={};e["stats.".concat(l)]={title:i},p.collection("categories").doc(t).update(e)}},"Update"),r.a.createElement("button",{onClick:function(){for(var e in delete n.stats[l],n.cards)delete n.cards[e][l];p.collection("categories").doc(t).set(n)}},"Delete"))}function le(e){var t=e.categoryId,n=e.category,l=Object(a.useState)(""),c=Object(s.a)(l,2),o=c[0],u=c[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{value:o,onChange:function(e){u(e.target.value)}}),r.a.createElement("button",{onClick:function(){n.stats[o]={title:o},p.collection("categories").doc(t).set(n)}},"Add"))}var ce=function(){var e=Object(u.i)().categoryId,t=ae("categories",e,!0);return console.log("USE DOC RESULT",t),t?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,"STATS LIST"),r.a.createElement("ul",null,Object.entries(t.stats).map((function(n){var a=Object(s.a)(n,2),l=a[0],c=a[1];return r.a.createElement(re,{categoryId:e,category:t,statKey:l,stat:c})})),r.a.createElement(le,{categoryId:e,category:t}))):r.a.createElement("div",null,"Loading...")},oe=["ant","ben","dan","didun","dt","grant","mike","morgan","nick","pearce","rob","scouse","stevooo","sunny"];function ue(e){var t=e.categoryId,n=e.category,l=e.cardKey,c=e.cardItem,o=Object(a.useState)(c),u=Object(s.a)(o,2),i=u[0],m=u[1],d=function(e){m(Object(S.a)(Object(S.a)({},i),{},Object(C.a)({},e.target.name,e.target.value)))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"title"},"Title"),r.a.createElement("input",{name:"title",value:i.title,onChange:d})),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"countryCode"},"Country Code"),r.a.createElement("select",{name:"countryCode",value:i.countryCode,onChange:d},r.a.createElement("option",{value:"uk"},"UK"),r.a.createElement("option",{value:"us"},"US"))),Object.entries(n.stats).map((function(e){var t=Object(s.a)(e,2),n=t[0],a=t[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("label",{htmlFor:n},a.title),r.a.createElement("input",{name:n,type:"number",value:i[n],onChange:d})),r.a.createElement("br",null))})),r.a.createElement("button",{onClick:function(){var e={};e["cards.".concat(l)]=i,p.collection("categories").doc(t).update(e)}},"Update"),r.a.createElement("button",{onClick:function(){console.log("CAT PRE DELETE",n,l),delete n.cards[l],console.log("CAT POST DELETE",n),p.collection("categories").doc(t).set(n)}},"Delete"),r.a.createElement("br",null))}function ie(e){var t=e.categoryId,n=e.category,l=Object(a.useState)({title:"",countryCode:""}),c=Object(s.a)(l,2),o=c[0],u=c[1],i=function(e){u(Object(S.a)(Object(S.a)({},o),{},Object(C.a)({},e.target.name,e.target.value)))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"title"},"Title"),r.a.createElement("input",{name:"title",value:o.title,onChange:i})),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"countryCode"},"Country Code"),r.a.createElement("select",{name:"countryCode",value:o.countryCode,onChange:i},r.a.createElement("option",{value:"uk"},"UK"),r.a.createElement("option",{value:"us"},"US"))),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"img"},"Image"),r.a.createElement("select",{name:"img",value:o.img,onChange:i},oe.map((function(e){return r.a.createElement("option",{value:e},e)})),r.a.createElement("option",{value:"us"},"US"))),r.a.createElement("br",null),Object.entries(n.stats).map((function(e){var t=Object(s.a)(e,2),n=t[0],a=t[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("label",{htmlFor:n},a.title),r.a.createElement("input",{name:n,onChange:i})),r.a.createElement("br",null))})),r.a.createElement("button",{onClick:function(){n.cards[o.title]=o,p.collection("categories").doc(t).set(n)}},"Add"))}var se=function(){var e=Object(u.i)().categoryId,t=ae("categories",e,!0);return console.log("USE DOC RESULT",t),t?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,"CARD LIST"),r.a.createElement("ul",null,Object.entries(t.cards).map((function(n){var a=Object(s.a)(n,2),l=a[0],c=a[1];return r.a.createElement(ue,{categoryId:e,category:t,cardKey:l,cardItem:c})})),r.a.createElement("hr",null),r.a.createElement(ie,{categoryId:e,category:t}))):r.a.createElement("div",null,"Loading...")};var me=function(){var e=b().currentUser;console.log({currentUser:e});var t=x("categories"),n=x("users");console.log("USERS",n);var l=Object(a.useState)({categoryId:"",player2Id:""}),c=Object(s.a)(l,2),o=c[0],u=c[1],i=function(e){u(Object(S.a)(Object(S.a)({},o),{},Object(C.a)({},e.target.name,e.target.value)))};function m(){return(m=Object(y.a)(j.a.mark((function a(){var r,l;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!(r=t&&Object.values(t).find((function(e){return e.id=o.categoryId})))||!e){a.next=7;break}return l=null===n||void 0===n?void 0:n.find((function(e){return e.id===o.player2Id})),console.log("P2 User",l),a.next=6,p.collection("games").add({pack:r,p1Id:e.uid,p1Username:e.displayName,p2Id:o.player2Id,p2Username:l.username,p1TurnNumber:0,p2TurnNumber:0,turnNumber:0});case 6:a.sent;case 7:case"end":return a.stop()}}),a)})))).apply(this,arguments)}return console.log("CHALLENGE DATA",o,t,n),t&&n?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,"NEW GAME"),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"categoryId"},"Category"),r.a.createElement("select",{name:"categoryId",value:o.categoryId,onChange:i},r.a.createElement("option",{value:""},"Select..."),Object.values(t).map((function(e){return r.a.createElement("option",{value:e.id},e.title)})))),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"player2Id"},"User"),r.a.createElement("select",{name:"player2Id",value:o.player2Id,onChange:i},r.a.createElement("option",{value:""},"Select..."),Object.values(n).map((function(e){return r.a.createElement("option",{value:e.id},e.username)})))),r.a.createElement("button",{onClick:function(){return m.apply(this,arguments)}},"New Game")):r.a.createElement("div",null,"Loading...")};var de=function(){var e=x("games"),t=null===e||void 0===e?void 0:e.map((function(e){var t;return{title:"".concat(null===e||void 0===e||null===(t=e.pack)||void 0===t?void 0:t.title),description:"".concat(null===e||void 0===e?void 0:e.p1Username," vs ").concat(null===e||void 0===e?void 0:e.p2Username),url:"/game/".concat(null===e||void 0===e?void 0:e.id)}}));return e?t?r.a.createElement(r.a.Fragment,null,r.a.createElement(_.Source,null,"Games"),r.a.createElement(F,{items:t})):r.a.createElement("div",null,"No games."):r.a.createElement(G,null)},pe=n(29),ve=n(99),Ee=n(161),ge=n(159),be=n(115),fe=n(114),he=n.n(fe);function Oe(e){return r.a.createElement(Ee.a.Row,{key:e.key,onClick:e.onSelectStat},r.a.createElement(je,{status:void 0},e.title),r.a.createElement(je,{status:void 0},e.value))}function je(e){var t=e.status,n=e.children;return r.a.createElement(Ee.a.Cell,{positive:"positive"===t,negative:"negative"===t,warning:"warning"===t},n)}var ye=function(e){console.log("CARD PROPS",e);var t=e.card,n=e.stats;return r.a.createElement(Ee.a,{celled:!0,selectable:!0,unstackable:!0,size:"small",style:{width:"70%",marginLeft:5}},r.a.createElement(Ee.a.Header,null,r.a.createElement(Ee.a.Row,null,r.a.createElement(Ee.a.HeaderCell,null,t.title.toUpperCase()),r.a.createElement(Ee.a.HeaderCell,{textAlign:"center"},t.countryCode&&r.a.createElement(ge.a,{name:t.countryCode})))),r.a.createElement(Ee.a.Body,null,r.a.createElement(Ee.a.Row,null,r.a.createElement(Ee.a.Cell,{colSpan:"2"},r.a.createElement(be.a,{src:he.a,fluid:!0}))),Object.entries(n).map((function(n){var a=Object(s.a)(n,2),l=a[0],c=a[1];console.log(c,l);var o=c.title,u=t[l];return r.a.createElement(Oe,{key:l,img:t.img,title:o,value:u,onSelectStat:function(){return e.onSelectStat({statKey:l,title:o,value:u})}})}))))},Ce=n(162);function Se(e){var t,n,r=ae("games",e,!0),l=(null===r||void 0===r||r.pack.stats,b().currentUser),c=null===l||void 0===l?void 0:l.uid,o=null;(null===r||void 0===r?void 0:r.p1Id)===c?(o=1,t=null===r||void 0===r?void 0:r.p1Username,n=null===r||void 0===r?void 0:r.p2Username):(null===r||void 0===r?void 0:r.p2Id)===c&&(o=2,t=null===r||void 0===r?void 0:r.p2Username,n=null===r||void 0===r?void 0:r.p1Username);var u=Math.floor(2*Math.random())+1;Object(a.useEffect)((function(){var t,n=null===r||void 0===r||null===(t=r.pack)||void 0===t?void 0:t.cards,a=null===r||void 0===r?void 0:r.turns;if(n&&!a){var l=function(e){for(var t=[],n=Object.keys(e),a=n.length/2,r=0;r<a;r++){var l=Math.floor(Math.random()*a),c=n.splice(l,1),o=Object(s.a)(c,1)[0];t.push(o)}return[t,n]}(n),c=Object(s.a)(l,2),o=c[0],i=c[1];!function(){m.apply(this,arguments)}()}function m(){return(m=Object(y.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.collection("games").doc(e).update({turnNumber:1,p1TurnNumber:1,p2TurnNumber:1,"turns.turn1":{id:1,player:u,p1Cards:o,p2Cards:i,statKey:null,result:null}});case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}}),[e,r]);var i=null===r||void 0===r?void 0:r.turnNumber,m=r?r["p".concat(o,"TurnNumber")]:1,d=Object(a.useState)(m),v=Object(s.a)(d,2),E=v[0],g=v[1];E!==m&&g(m);var f=Object(a.useCallback)((function(){var t=E+1;function n(){return(n=Object(y.a)(j.a.mark((function n(){return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,p.collection("games").doc(e).update(Object(C.a)({},"p".concat(o,"TurnNumber"),t));case 2:case"end":return n.stop()}}),n)})))).apply(this,arguments)}t>i&&console.log("HANDLE NEXT TURN STOP?",t,i),function(){n.apply(this,arguments)}(),g(t)}),[E,o]);o||console.error("PLAYER NOT FOUND");var h=r&&function(e,t){if(!e.turns||0===t)return null;var n="turn".concat(t);return n in e.turns?e.turns[n]:null}(r,E),O=null===h||void 0===h?void 0:h.player,S=r&&ke(r,E,1),k=r&&ke(r,E,2),w=Object(a.useState)(null),T=Object(s.a)(w,2),x=T[0],U=T[1],I=Object(a.useCallback)((function(e){O===o&&U(e)}),[O,o]),N=Object(a.useCallback)((function(){if(!x||0===S.length||0===k.length)return null;var t,n,a,l=[],c=x.statKey,u=Object(ve.a)(S),i=u[0],s=u.slice(1),m=Object(ve.a)(k),d=m[0],v=m.slice(1),g=null===r||void 0===r?void 0:r.pack.cards[i][c],b=null===r||void 0===r?void 0:r.pack.cards[d][c];if(!g||!b)return null;function f(){return(f=Object(y.a)(j.a.mark((function r(){var u,i,s;return j.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!=E){r.next=3;break}return console.log("TURN COUNT UNDEFINED"),r.abrupt("return",null);case 3:return i=E+1,s=0===t?o:t,r.next=7,p.collection("games").doc(e).update((u={},Object(C.a)(u,"turns.turn".concat(E,".statKey"),c),Object(C.a)(u,"turns.turn".concat(E,".result"),t),Object(C.a)(u,"turns.turn".concat(i),{id:i,player:s,p1Cards:n,p2Cards:a,drawCards:l,statKey:null,result:null}),Object(C.a)(u,"turnNumber",i),u));case 7:case"end":return r.stop()}}),r)})))).apply(this,arguments)}g>b?(t=1,n=[].concat(Object(pe.a)(s),[d],Object(pe.a)(l),[i]),a=Object(pe.a)(v)):g<b?(t=2,n=Object(pe.a)(s),a=[].concat(Object(pe.a)(v),[i],Object(pe.a)(l),[d])):(t=0,n=Object(pe.a)(s),a=Object(pe.a)(v),l=[].concat(Object(pe.a)(l),[i,d])),function(){f.apply(this,arguments)}(),U(null)}),[x,r,S,k,E]);if(!r||!S||!k)return{game:r,turn:h,currentTurn:E,currentPlayer:o,topCards:[],handleSelectStat:I};var F=Object(s.a)(S,1)[0],P=null===r||void 0===r?void 0:r.pack.cards[F],A=Object(s.a)(k,1)[0],R=[P,null===r||void 0===r?void 0:r.pack.cards[A]],D={turnId:null===h||void 0===h?void 0:h.id,turnNo:r.turnNumber,p1TurnNo:r.p1TurnNumber,p2TurnNo:r.p2TurnNumber,currentPlayer:o,turnPlayer:O,turn:h};return console.table({turnId:null===h||void 0===h?void 0:h.id,turnNo:r.turnNumber,p1TurnNo:r.p1TurnNumber,p2TurnNo:r.p2TurnNumber,currentPlayer:o,turnPlayer:O}),console.table(null===r||void 0===r?void 0:r.turns),console.log(D),{game:r,turn:h,currentTurn:E,turnPlayer:O,currentPlayer:o,currentUsername:t,opponentUsername:n,topCards:R,selectedStat:x,handleSelectStat:I,handleTurn:N,handleNextTurn:f,debug:D}}function ke(e,t,n){return e.turns&&0!==t?(console.log("TURN DUMP",t),e.turns["turn".concat(t)]["p".concat(n,"Cards")]):[]}function we(e){var t=e.username,n=e.children,a=e.align,l=void 0===a?"left":a;return r.a.createElement("div",{style:{float:l,width:"90%",margin:5,padding:5,border:"1px solid grey",borderRadius:5}},r.a.createElement("b",null,t,":"),r.a.createElement("br",null),n)}var Te=function(){var e,t=Se(Object(u.i)().gameId),n=t.game,a=t.turn,l=t.currentTurn,c=t.turnPlayer,o=t.currentPlayer,i=t.currentUsername,m=t.opponentUsername,d=t.topCards,p=t.selectedStat,v=t.handleSelectStat,E=t.handleTurn,g=t.handleNextTurn,b=t.debug,f=Object(s.a)(d,2),h=f[0],O=f[1],j=1===o?h:O,y=1===o?O:h,C=null===a||void 0===a?void 0:a.statKey;return(null===a||void 0===a?void 0:a.result)===o?e="Yay! You won the round! \ud83d\ude00":0===(null===a||void 0===a?void 0:a.result)?e="Ok! You drew the round! \ud83d\ude32":(null===a||void 0===a?void 0:a.result)&&(e="Oh noes! You lost the round! \ud83d\ude22"),n?j||y?y?j?r.a.createElement(r.a.Fragment,null,r.a.createElement(_.Source,null,"Game On!"),o===c?r.a.createElement(we,{username:"Games Master"},"Round ",l,". Your turn ",i,". Tap that stat!"):r.a.createElement(we,{username:"Games Master"},"Round ",l,". ",m,"'s turn."),C&&r.a.createElement(r.a.Fragment,null,o===c?r.a.createElement(r.a.Fragment,null,r.a.createElement(we,{username:i,align:"right"},n.pack.stats[C].title,": ",j[C]),r.a.createElement(we,{username:m},n.pack.stats[C].title,": ",y[C])):r.a.createElement(r.a.Fragment,null,r.a.createElement(we,{username:m},n.pack.stats[C].title,": ",y[C]),r.a.createElement(we,{username:i,align:"right"},n.pack.stats[C].title,": ",j[C]))),e&&r.a.createElement(we,{username:"Games Master"},e),j&&r.a.createElement(ye,{card:j,stats:n.pack.stats,selectedStatKey:null,onSelectStat:v}),r.a.createElement("pre",null,JSON.stringify(b,null,2)),r.a.createElement($,null,p&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Ce.a,{color:"violet",onClick:E,style:{width:"90%",height:"40%",margin:"5%"}},"Play Card")),l<n.turnNumber&&null!=(null===a||void 0===a?void 0:a.result)&&r.a.createElement(Ce.a,{color:"violet",onClick:g,style:{width:"90%",height:"40%",margin:"5%"}},"Next Round"))):r.a.createElement(we,{username:"Games Master"},m," wins!"):r.a.createElement(we,{username:"Games Master"},i," wins!"):r.a.createElement(we,{username:"Games Master"},"It's a draw!"):r.a.createElement(G,null)};function xe(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(_.Source,null,"Top Trumps \ud83d\udecb\ufe0f"),r.a.createElement(F,{items:[{title:"Friends",url:"/friends"},{title:"Packs",url:"/categories"},{title:"Games",url:"/games"},{title:"New Game",url:"/challenge"}]}),r.a.createElement(T,null))}var Ue=function(){return r.a.createElement(u.d,null,r.a.createElement(u.b,{path:"/signup",component:k}),r.a.createElement(u.b,{path:"/signin",component:w}),r.a.createElement(h,{path:"/home",component:xe}),r.a.createElement(h,{path:"/friends",component:ee}),r.a.createElement(h,{path:"/categories",component:ne}),r.a.createElement(h,{path:"/challenge",component:me}),r.a.createElement(h,{path:"/games",component:de}),r.a.createElement(h,{path:"/game/:gameId",component:Te}),r.a.createElement(h,{path:"/category/:categoryId/stats",component:ce}),r.a.createElement(h,{path:"/category/:categoryId/cards",component:se}),r.a.createElement(h,{path:"/signout",component:T}),r.a.createElement(u.a,{from:"/",to:"/signin"}))};var Ie=function(){return r.a.createElement(o.a,null,r.a.createElement(f,null,r.a.createElement(Q,null,r.a.createElement(Ue,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Ie,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[125,1,2]]]);
//# sourceMappingURL=main.6380d591.chunk.js.map